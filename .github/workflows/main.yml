name: AutoTwttelgrm2

on: workflow_dispatch

jobs:
  build:

    runs-on: windows-latest
    timeout-minutes: 999

    steps:
    - name: Instala Paquetes Necesarios
      run: |
        cmd /c pip install requests
        cmd /c pip install m3u8
        cmd /c pip install aiohttp
        cmd /c pip install telegram-upload
        cmd /c md "C:\1Twitch"
        cmd /c md "C:\Users\runneradmin\.config"
    - name: Descargar Archivos Necesarios
      run: |
        Invoke-WebRequest https://drive.google.com/uc?id=$Env:SESSION_DATA -OutFile "C:\Users\runneradmin\.config\data.zip"
        Invoke-WebRequest https://raw.githubusercontent.com/mnrintel08/AutoTwtT1/main/DuplTwi_R0_1_var.py -OutFile "C:\1Twitch\DuplTwi_R0_1_var.py"
        Invoke-WebRequest https://raw.githubusercontent.com/mnrintel08/AutoTwtT1/main/DuplTwi_R0_1.py -OutFile "C:\1Twitch\DuplTwi_R0_1.py"
      env:
        SESSION_DATA: ${{ secrets.SESSION_DATA_2 }}
    - name: Descomprimir Datos
      run: |
        cd "C:\Users\runneradmin\.config"
        Expand-Archive data.zip -DestinationPath "C:\Users\runneradmin\.config"
    - name: Ejecutar
      run: |
        cd "C:\1Twitch"
        python DuplTwi_R0_1.py $Env:CHNLS_LINKS 1282377270,1282379886,1282466088,1282278914,1281926047,1281997704,1282005716,1282010490,1282013041,1282016526,1282423653,1282665249
      env:
        CHNLS_LINKS: ${{ secrets.CHNLS_LINKS }}
